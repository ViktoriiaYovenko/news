<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>üìä Akcie ‚Äì p≈ôehled</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 900px; margin: auto; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 40px; }
        th, td { padding: 8px; border: 1px solid #ccc; text-align: left; }
        th { background-color: #f2f2f2; }
        .sell { background-color: #ffe6e6; }
        .buy { background-color: #e6ffe6; }
        h1, h2 { color: #333; }
        hr { margin: 30px 0; }
        ul { padding-left: 20px; }
        li { margin-bottom: 6px; }
    </style>
</head>
<body>
    <h1>üìä P≈ôehled akci√≠ a zpr√°v</h1>

    <div style="margin-bottom: 20px;">
        <a href="/liststock" download="liststock.json">
          <button style="padding: 10px 20px; font-size: 16px;">üíæ St√°hnout JSON</button>
        </a>
    </div>

    <form method="get" action="/" style="margin-bottom: 20px;">
        <label>Od:</label>
        <input type="date" name="start" value="{{ start }}">
        <label>Do:</label>
        <input type="date" name="end" value="{{ end }}">
        <label style="margin-left: 20px;">
            <input type="checkbox" name="hide_negative" value="1" {% if hide_negative %}checked{% endif %}>
            üìâ Skr√Ωt z√°porn√© hodnocen√≠
        </label>
        <label style="margin-left: 20px;">
            <input type="checkbox" name="hide_lownews" value="1" {% if hide_lownews %}checked{% endif %}>
            üîç Skr√Ωt m√°lo zpr√°v
        </label>
        <button type="submit" style="margin-left: 20px;">üîç Zobrazit</button>
    </form>

    <table>
        <tr>
            <th>Spoleƒçnost</th>
            <th>Datum</th>
            <th>Hodnocen√≠</th>
            <th>Doporuƒçen√≠</th>
        </tr>
        {% for stock in stocks %}
        <tr class="{{ 'sell' if stock.sell == 1 else 'buy' }}">
            <td>{{ stock.name }}</td>
            <td>{{ stock.date }}</td>
            <td>{{ stock.rating }}</td>
            <td>{{ 'Prodat' if stock.sell == 1 else 'Koupit / Dr≈æet' }}</td>
        </tr>
        {% endfor %}
    </table>

    {% for stock in stocks %}
    <h2>{{ stock.name }} ‚Äì Zpr√°vy</h2>
    {% if stock.news %}
        <ul>
        {% for item in stock.news %}
            <li>
                <a href="{{ item.url }}" target="_blank">{{ item.title }}</a>
                <small>({{ item.source }}, {{ item.date }})</small> ‚Äì                
                {% if item.score > 0 %}
                    <span style="color:green;">+{{ item.score }}</span>
                {% elif item.score < 0 %}
                    <span style="color:red;">{{ item.score }}</span>
                {% else %}
                    <span style="color:gray;">0</span>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p><i>≈Ω√°dn√© zpr√°vy</i></p>
    {% endif %}
    <hr>
    {% endfor %}

    <h2>üåç Doporuƒçen√≠ z extern√≠ slu≈æby</h2>
{% if external %}
    <table>
        <tr>
            <th>Spoleƒçnost</th>
            <th>Hodnocen√≠</th>
            <th>Doporuƒçen√≠</th>
        </tr>
        {% for item in external %}
        <tr class="{{ 'sell' if item.sell == 1 else 'buy' }}">
            <td>{{ item.name }}</td>
            <td>{{ item.rating }}</td>
            <td>{{ 'Prodat' if item.sell == 1 else 'Koupit / Dr≈æet' }}</td>
        </tr>
        {% endfor %}
    </table>
{% else %}
    <p><i>≈Ω√°dn√° data z extern√≠ slu≈æby</i></p>
{% endif %}

<div style="margin-top: 40px;">
    <a href="/recommendations" target="_blank">
        <button style="padding: 10px 20px; font-size: 16px;">üì§ Doporuƒçen√≠ pro Burzu</button>
    </a>
</div>


</body>
</html>
